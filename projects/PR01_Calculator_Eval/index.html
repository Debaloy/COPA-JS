<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator Using Eval</title>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        button {
            width: 70px;
            height: 38px;
            margin: 2px;
        }

        input[type="text"] {
            width: 100%;
            height: 50px;
            margin-bottom: 4px;
            text-align: right;
            font-size: 2em;
            letter-spacing: 2px;
        }

        .container {
            width: 50%;
            margin-left: 25%;
            display: flex;
            justify-content: center;
        }

        body {
            width: 100%;
            height: 50vh;
            padding-top: 30vh;
        }

    </style>
</head>
<body>
    <div class="container">

        <table>
            <tr>
                <td colspan="7"><input type="text" id="result"></td>
            </tr>
            <tr>
                <td><button>Rad</button></td>
                <td><button>Deg</button></td>
                <td><button onclick="keyPressed('!')">x!</button></td>
                <td><button onclick="keyPressed('po')">(</button></td>
                <td><button onclick="keyPressed('pc')">)</button></td>
                <td><button onclick="keyPressed('%')">%</button></td>
                <td><button onclick="clearResult()">CE</button></td>
            </tr>
            <tr>
                <td><button>Inv</button></td>
                <td><button>sin</button></td>
                <td><button>ln</button></td>
                <td><button onclick="keyPressed('7')">7</button></td>
                <td><button onclick="keyPressed('8')">8</button></td>
                <td><button onclick="keyPressed('9')">9</button></td>
                <td><button onclick="keyPressed('/')">&divide</button></td>
            </tr>
            <tr>
                <td><button>&pi;</button></td>
                <td><button>cos</button></td>
                <td><button>log</button></td>
                <td><button onclick="keyPressed('4')">4</button></td>
                <td><button onclick="keyPressed('5')">5</button></td>
                <td><button onclick="keyPressed('6')">6</button></td>
                <td><button onclick="keyPressed('*')">&times;</button></td>
            </tr>
            <tr>
                <td><button>e</button></td>
                <td><button>tan</button></td>
                <td><button>&Sqrt;</button></td>
                <td><button onclick="keyPressed('1')">1</button></td>
                <td><button onclick="keyPressed('2')">2</button></td>
                <td><button onclick="keyPressed('3')">3</button></td>
                <td><button onclick="keyPressed('-')">&minus;</button></td>
            </tr>
            <tr>
                <td><button onclick="getPrevResult()">Ans</button></td>
                <td><button onclick="keyPressed('E')">EXP</button></td>
                <td><button onclick="keyPressed('**')">x<sup>y</sup></button></td>
                <td><button onclick="keyPressed('0')">0</button></td>
                <td><button onclick="keyPressed('.')">.</button></td>
                <td><button onclick="calcResult()">&equals;</button></td>
                <td><button onclick="keyPressed('+')">&plus;</button></td>
            </tr>
        </table>
    </div>

    <script>
        let result = '', answer;

        function renderResult(flag = true) {
            document.getElementById("result").value = flag ? result : 'Syntax Error';
        }

        function keyPressed(key) {
            if (key === 'po')   result += '(';
            if (key === 'pc')   result += ')';
            result += key;

            renderResult();
        }
        
        function clearResult() {
            result = '';
            renderResult();
        }

        function calcResult() {
            try {
                answer = eval(result);
            } catch {
                return renderResult(false);
            }
            result = answer;
            renderResult();
        }

        function getPrevResult() {
            result += answer;
            renderResult();
        }

        document.onkeydown = (e) => {
            if (e.key === 'Backspace') {
                if (result.length === 0) return;
                result = result.substring(0, result.length - 1);
                renderResult();
            }
        }
    </script>
</body>
</html>